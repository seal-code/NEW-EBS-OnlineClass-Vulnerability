from Crypto.Cipher import AES
from Crypto.Util.Padding import pad, unpad
import base64, requests

ID = #사용자 ID, 숫자, 쿠키의 memberSeq
VideoID = #비디오 ID, 숫자, Iframe에서 lctreLrnSqno
Progress = 100 #원하는 Progress 숫자
SecretToken = '' #비밀 토큰, 쿠키의 access
Host = '' #api 요청 주소, 쿠키의 host

encryptString = f'{ID}|{VideoID}|{Progress}' #포맷팅

zeroPadded = encryptString.encode('utf-8') #ZeroPadding Encoding
while (len(zeroPadded) % 16) != 0:
    zeroPadded += b'\x00'

encrypter = AES.new('l40jsfljasln32uf'.encode('utf-8'), AES.MODE_CBC, 'asjfknal3bafjl23'.encode('utf-8')) #ebs의 암호화 키와 iv로 암호화
encrypted = base64.b64encode(encrypter.encrypt(zeroPadded)) #암호화된 값을 Base64로 인코딩

encrypted = encrypted.decode('utf-8') # json 형태로 요청시 decode 해야함

res = requests.post(f'https://{Host}.ebsoc.co.kr/lecture/api/v1/student/learning/{VideoID}/progress', json={'encriptedProgressRate': encrypted}, headers={'X-AUTH-TOKEN': SecretToken}) #암호화된 값을 API로 전송
print(res.json()) #전송 결과값을 출력
